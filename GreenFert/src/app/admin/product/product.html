<div class="admin-neo">

  <!-- HEADER -->
  <header class="neo-header">
    <div class="header-inner">
      <h1>Product Registration</h1>
      <p>Add new products to the system</p>
    </div>
  </header>

  <!-- FORM CONTAINER -->
  <div class="neo-container">

    <form class="neo-form"
          [formGroup]="productfg"
          enctype="multipart/form-data">

      <!-- ================= BASIC DETAILS ================= -->
      <section class="neo-section">
        <h3>Basic Information</h3>

        <div class="neo-grid">

          <div class="form-group">
            <label class="form-label">Category</label>
            <select class="neo-input" formControlName="categoryid">
              <option value="">Select Category</option>
              @for(data of carray; track data;) {
                <option value="{{data.category_id}}">
                  {{data.categoryname}}
                </option>
              }
            </select>
            <label *ngIf="productfg.controls['categoryid'].errors?.['required'] && savestatus" class="text-danger">
              Category is required
            </label>
          </div>

          <div class="form-group">
            <label class="form-label">Product Name</label>
            <input type="text"
                   class="neo-input"
                   formControlName="name" />
            <label *ngIf="productfg.controls['name'].errors?.['required'] && savestatus" class="text-danger">
              Product Name is required
            </label>
            <label *ngIf="productfg.controls['name'].errors?.['pattern'] && savestatus" class="text-danger">
              Product Name can only contain letters and numbers
            </label>
          </div>

          <div class="form-group">
            <label class="form-label">Price / Amount</label>
            <input type="number"
                   class="neo-input"
                   formControlName="amount" />
            <label *ngIf="productfg.controls['amount'].errors?.['required'] && savestatus" class="text-danger">
              Amount is required
            </label>
          </div>

          <div class="form-group">
            <label class="form-label">Stock Quantity</label>
            <input type="number"
                   class="neo-input"
                   formControlName="stock" />
            <label *ngIf="productfg.controls['stock'].errors?.['required'] && savestatus" class="text-danger">
              Stock is required
            </label>
          </div>

          <div class="form-group">
            <label class="form-label">Product Weight</label>
            <input type="text"
                   class="neo-input"
                   formControlName="kg" />
            <label *ngIf="productfg.controls['kg'].errors?.['required'] && savestatus" class="text-danger">
              Weight is required
            </label>
          </div>

        </div>
      </section>

      <!-- ================= IMAGE UPLOAD ================= -->
      <section class="neo-section">
        <h3>Product Image</h3>

        <div class="image-upload-wrapper">

          <!-- Preview -->
          <div class="image-preview" *ngIf="previewUrl; else uploadBox">
            <img [src]="previewUrl" alt="Preview">

            <div class="overlay">
              <label>
                <i class="fas fa-camera me-2"></i> Change Image
                <input type="file"
                       hidden
                       formControlName="image"
                       (change)="selectFile($event)">
              </label>
            </div>
          </div>

          <!-- Upload -->
          <ng-template #uploadBox>
            <label class="upload-box">
              <input type="file"
                     hidden
                     formControlName="image"
                     (change)="selectFile($event)">
              <div class="upload-content">
                <i class="fas fa-image"></i>
                <p>Upload Product Image</p>
                <span>PNG or JPG Â· Max 5MB</span>
              </div>
            </label>
          <label *ngIf="productfg.controls['image'].errors?.['required'] && savestatus" class="text-danger">
            Product Image is required
          </label>
          </ng-template>

        </div>
      </section>

      <!-- ================= DESCRIPTION ================= -->
      <section class="neo-section">
        <h3>Description</h3>

        <div class="form-group">
          <label class="form-label">Product Description</label>
          <textarea rows="4"
                    class="neo-input"
                    formControlName="description">
          </textarea>
          <label *ngIf="productfg.controls['description'].errors?.['required'] && savestatus" class="text-danger">
            Description is required
          </label>
        </div>
      </section>

      <!-- ================= ACTION ================= -->
      <div class="neo-actions">
        <button class="neo-btn"
                type="submit"
                (click)="sproduct()">
          <i class="fas fa-box me-2"></i> Add Product
        </button>
      </div>

    </form>

  </div>
</div>
