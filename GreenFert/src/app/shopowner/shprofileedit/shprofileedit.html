<div class="edit-wrap"> 
  
  <!-- HERO SECTION -->
  <div class="hero-section">
    <div class="hero-background">
      <div class="hero-orb hero-orb-1"></div>
      <div class="hero-orb hero-orb-2"></div>
    </div>
    <div class="hero-content">
      <h1 class="hero-title">Edit Profile</h1>
      <p class="hero-subtitle">Update your shop information and settings</p>
    </div>
  </div>

  <div class="edit-card"> 
    
    <form [formGroup]="profilefg" (ngSubmit)="saveProfile()"> 
      
      <!-- PROFILE PICTURE SECTION -->
      <div class="profile-picture-section">
        <div class="picture-preview">
          <div class="avatar-container" (click)="openImageModal()" [class.clickable]="previewUrl">
            <img *ngIf="previewUrl" [src]="previewUrl" alt="Profile Preview" class="avatar-img">
            <div *ngIf="!previewUrl" class="avatar-placeholder">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
              </svg>
            </div>
            <div class="avatar-badge">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
          </div>
        </div>
        
        <div class="picture-actions">
          <h3 class="section-title">Profile Picture</h3>
          <p class="section-subtitle">Upload a clear photo of your shop or logo</p>
          
          <input type="file" #fileInput (change)="selectFile($event)" accept="image/*" style="display: none">
          
          <div class="button-group">
            <button type="button" (click)="fileInput.click()" class="btn-upload">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M17 8L12 3M12 3L7 8M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>{{ previewUrl ? 'Change Photo' : 'Upload Photo' }}</span>
            </button>
            
            <button type="button" *ngIf="previewUrl" (click)="removePhoto()" class="btn-remove">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              Remove
            </button>
          </div>
          
          <p class="file-hint">Recommended: Square image, at least 400x400px (Max 5MB)</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- FORM FIELDS -->
      <h3 class="section-title">Shop Information</h3>
      
      <div class="form-row"> 
        <div class="form-group"> 
          <label>Shop Name</label> 
          <input type="text" formControlName="shopname" class="form-control" /> 
          <small class="text-danger" *ngIf="savestatus && profilefg.controls['shopname'].errors">Valid name required</small> 
        </div> 
        <div class="form-group"> 
          <label>Email</label> 
          <input type="text" formControlName="shopemail" class="form-control" /> 
          <small class="text-danger" *ngIf="savestatus && profilefg.controls['shopemail'].errors">Valid email required</small> 
        </div> 
      </div> 

      <div class="form-row"> 
        <div class="form-group"> 
          <label>Contact</label> 
          <input type="text" formControlName="shopcontact" class="form-control" /> 
          <small class="text-danger" *ngIf="savestatus && profilefg.controls['shopcontact'].errors">Enter 10 digit contact number</small> 
        </div> 
        <div class="form-group"> 
          <label>Licence</label> 
          <input type="text" formControlName="shoplicence" class="form-control" /> 
          <small class="text-danger" *ngIf="savestatus && profilefg.controls['shoplicence'].errors">Licence required</small> 
        </div> 
      </div> 

      <div class="form-row"> 
        <div class="form-group"> 
          <label>Username</label> 
          <input type="text" formControlName="username" class="form-control" /> 
          <small class="text-danger" *ngIf="savestatus && profilefg.controls['username'].errors">Valid username required</small> 
        </div> 
        <div class="form-group"> 
          <label>New Password (optional)</label> 
          <input type="password" formControlName="password" class="form-control" /> 
          <small class="text-danger" *ngIf="savestatus && profilefg.controls['password'].errors?.['minlength']">Minimum 6 characters</small> 
        </div> 
      </div> 

      <div class="btn-row"> 
        <button type="submit" class="btn-save">Save</button> 
        <a routerLink="/smaster/profile" class="btn-cancel">Cancel</a> 
      </div> 
    </form> 
  </div> 
</div>

<!-- IMAGE MODAL -->
<div *ngIf="showImageModal" class="image-modal-overlay" (click)="closeImageModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close-button" (click)="closeImageModal()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div class="modal-image-container">
      <img [src]="previewUrl" alt="Profile Picture" class="modal-image">
    </div>
    <div class="modal-footer">
      <p class="modal-title">Profile Picture</p>
    </div>
  </div>
</div>
