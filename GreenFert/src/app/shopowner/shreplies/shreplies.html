<div class="shreplies-page">

  <!-- HERO SECTION -->
  <div class="hero-section">
    <div class="hero-background">
      <div class="hero-orb hero-orb-1"></div>
      <div class="hero-orb hero-orb-2"></div>
      <div class="hero-orb hero-orb-3"></div>
    </div>
    <div class="hero-content">
      <h1 class="hero-title">Admin Replies</h1>
      <p class="hero-subtitle">View responses to your collection reports</p>
      <button class="refresh-button" (click)="loadReplies()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M21 10C21 10 18.995 7.26822 17.3662 5.63824C15.7373 4.00827 13.4864 3 11 3C6.02944 3 2 7.02944 2 12C2 16.9706 6.02944 21 11 21C15.1031 21 18.5649 18.2543 19.6482 14.5M21 10V4M21 10H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Refresh</span>
      </button>
    </div>
  </div>

  <!-- CONTENT WRAPPER -->
  <div class="content-wrapper">

    <!-- LOADING STATE -->
    <div *ngIf="loading" class="loading-card">
      <div class="loading-spinner">
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
      </div>
      <p>Loading your replies...</p>
    </div>

    <!-- EMPTY STATE -->
    <div *ngIf="!loading && replies.length === 0" class="empty-state-card">
      <div class="empty-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
          <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h3>No Replies Yet</h3>
      <p>You haven't received any responses from the admin yet. When you submit collection reports, replies will appear here.</p>
      <a href="#/shopowner/shrequest" class="action-link">
        <span>ğŸ“</span>
        <span>Submit a Report</span>
      </a>
    </div>

    <!-- REPLIES LIST -->
    <div class="replies-container" *ngIf="!loading && replies.length > 0">
      
      <!-- Stats Card -->
      <div class="stats-card">
        <div class="stat-item">
          <div class="stat-icon">ğŸ’¬</div>
          <div class="stat-content">
            <span class="stat-value">{{ replies.length }}</span>
            <span class="stat-label">Total Replies</span>
          </div>
        </div>
      </div>

      <!-- Reply Cards -->
      <div class="reply-timeline">
        <div class="timeline-item" *ngFor="let r of replies; let i = index">
          
          <!-- Timeline Marker -->
          <div class="timeline-marker">
            <div class="marker-dot"></div>
            <div class="marker-line" *ngIf="i < replies.length - 1"></div>
          </div>

          <!-- Reply Card -->
          <div class="reply-card">
            <div class="card-glow"></div>

            <!-- Card Header -->
            <div class="card-header">
              <div class="reply-number">#{{ replies.length - i }}</div>
              <div class="date-badges">
                <div class="date-badge pending">
                  <span class="badge-icon">ğŸ“…</span>
                  <span class="badge-text">{{ r.pending_date | date:'MMM dd, yyyy' }}</span>
                </div>
                <div class="date-badge reported">
                  <span class="badge-icon">ğŸ“¤</span>
                  <span class="badge-text">{{ r.message_date | date:'MMM dd, yyyy' }}</span>
                </div>
              </div>
            </div>

            <!-- Conversation Flow -->
            <div class="conversation">
              
              <!-- Your Message -->
              <div class="message-block user-message">
                <div class="message-header">
                  <div class="message-avatar user-avatar">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <div class="message-meta">
                    <span class="message-sender">Your Report</span>
                    <span class="message-type">Collection Issue</span>
                  </div>
                </div>
                <div class="message-content">
                  <p>{{ r.message }}</p>
                </div>
              </div>

              <!-- Admin Reply -->
              <div class="message-block admin-message">
                <div class="message-header">
                  <div class="message-avatar admin-avatar">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path d="M12 14L21 3M12 14L15 21L18 13.5L21 3M12 14L3 21L6 13.5L3 3L12 14Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <div class="message-meta">
                    <span class="message-sender">Admin Response</span>
                    <span class="message-type">Official Reply</span>
                  </div>
                  <div class="verified-badge">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"/>
                    </svg>
                  </div>
                </div>
                <div class="message-content">
                  <p>{{ r.reply_message }}</p>
                </div>
              </div>

            </div>

          </div>

        </div>
      </div>

    </div>

  </div>

</div>
